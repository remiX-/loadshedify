Resources:
  Search:
    Type: AWS::Serverless::Function
    Properties:
      PackageType: Zip
      CodeUri: src/Proxy/Commands/Proxy.Command.Schedule/
      Handler: Proxy.Command.Schedule::Proxy.Command.ScheduleFunction::FunctionHandler
      Runtime: dotnet6
      Policies:
        - AWSLambdaBasicExecutionRole
      Events:
        SNSEvent:
          Type: SNS
          Properties:
            Topic: !Ref MainSNSTopic
            FilterPolicy:
              command:
                - searchv2
      Environment:
        Variables:
          ESP_AUTH_TOKEN: !Ref EspAuthToken
          S3_ASSET_BUCKET: !Ref S3Bucket
